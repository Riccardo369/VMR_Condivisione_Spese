<!DOCTYPE html>
<html>
    <head>
    <fieldset style="border: 2px double rgb(0, 51, 128)">

        <legend style="color:blueviolet; font-family: papyrus;">

            <strong>SEP</strong>  </legend>

            <link rel="stylesheet">
        </head>      
        
        

     <body bgcolor="#FFDEAD">
        <h3>
            <em>Completa tutti i campi per completare la registrazione</em>
        </h3>
        
        <div>
            <p style="text-align:center;">
        Inserisci nome:
        <input type="text" id="Nome" placeholder="Nome" value = "Veronika"> 
            

            <br>
            <br>

            
         Inserisci cognome:
         <input type="text" id="Cognome" placeholder="Cognome" value = "Moriconi">
        

            <br>
            <br>

       
        Inserisci nickname:
        <input type="text" id="Nickname" placeholder="Nickname" value = "Vero47">  
            </p>
        </div>

        <br>
        <br>

        <div>
        <p style="text-align: center;">
        Inserisci numero di telefono:
        <input type="number" id="Numero di telefono" placeholder="Numero di telefono" value = "1113334449">
        
        <br>
        <br>

        
        Inserisci email:
        <input type="email" id="Email" placeholder="Inserisci email" value = "vero.moriconi@gmail.com">
        
        </p>
        </div>

        <br>
        <br>

        <p style="text-align: center;">
        Scegli nuna password (contenente almeno 8 caratteri, una maiuscola e un carattere speciale):
        <input type="password" id="Password" placeholder="Inserisci password">
        </p>

       <p style="text-align: center;">

        <button onclick="RequestRegister()"> Conferma </button>

        <script src = "SecurityClient.js"></script>
        <script>

            const SecurityClient = require("./SecurityClient");

            function RequestRegister() {

                let HostServer = "192.168.31.54";
                let PortServer = 3000;

                const data = {
                    "FirstName": document.getElementById("Nome").value,
                    "LastName": document.getElementById("Cognome").value,
                    "Nickname": document.getElementById("Nickname").value,
                    "TelephoneNumber": document.getElementById("Numero di telefono").value,
                    "Email": document.getElementById("Email").value,
                    "Password": CryptingText(document.getElementById("Password").value)
                };
    
                fetch("http://"+HostServer+":"+PortServer+"/register", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                .then(response => response.json())
                .then(data => {
                    //gestisci la risposta del server qui
                    console.log(data);
                })
                .catch((error) => {
                    console.log("ERRORE OLÃ¨");
                    //gestisci gli errori qui
                    console.error('Errore:', error);
                });
            }

        </script>
       

       </p>

     </body>
    </fieldset>
</html>

